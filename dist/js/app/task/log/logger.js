define(["require","jquery","utils/pubsub","app/trial/current_trial","app/task/settings","./post","./log_stack"],function(t){var e=t("jquery"),l=t("utils/pubsub"),r=t("app/trial/current_trial"),s=t("app/task/settings"),i=t("./post"),n=t("./log_stack"),a=0,u=e.Deferred().resolve(),o=function(t,e,l,r){var s=this._stimulus_collection.get_stimlist(),i=this._stimulus_collection.get_medialist();return{log_serial:r.length,trial_id:this.counter,name:this.name(),responseHandle:e.handle,latency:Math.floor(e.latency),stimuli:s,media:i,data:t}},g=function(){var t;return n.length-a<=0?u:(t=n.slice(a,n.length),a=n.length,e.when(u,i(t)))};return l.subscribe("log",function(t,e){var l=s.logger||{},i=l.logger?l.logger:o,a=r(),u=i.apply(a,[a.data,e,t,n]);n.push(u)}),l.subscribe("log:send",function(){var t=s.logger&&s.logger.pulse;t&&n.length-a>=t&&g()}),g});
//# sourceMappingURL=logger.js.map