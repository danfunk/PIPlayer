define(["underscore"],function(a){var e=function(r,t){var n=[];return a.each(r,function(r){var c,o,i,s=a.isObject(r)?r.mixer:void 0;switch(s){case"random":c=a.shuffle(e(r.data,!0)),o=t?c:e(c),n=n.concat(o);break;case"weightedRandom":var d=a.reduce(r.weights,function(a,e){return a+e}),u=Math.random()*d,f=0;for(i=0;i<r.data.length;i++)if(f+=r.weights[i],f=+f.toFixed(3),f>=u){c=[r.data[i]];break}o=t?c:e(c),n=n.concat(o);break;case"choose":c=a.chain(r.data).shuffle().first(r.n?r.n:1).value(),o=t?c:e(c),n=n.concat(o);break;case"repeat":for(c=e(r.data,!0),i=0;i<r.times;i++)o=t?c:e(c),n=n.concat(o);break;case"wrapper":t?n.push(r):n=n.concat(e(r.data));break;case void 0:n.push(r);break;default:throw new Error("Unknown wrapper "+s)}}),n};return e});
//# sourceMappingURL=mixer.js.map